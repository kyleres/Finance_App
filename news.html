<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News API Test</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
</head>
<body>

    <div id="header" class="jumbotron text-center">
        <h1>Stock News</h1>
    </div>

    <div class="row">
        <div class="col-3 p-5 border border-info text-center">
            <h3>Search Stock</h3>
            <input id="search" type="text"></input>
            <button id="go" type="button">Go</button>
        </div>
        <div id="news" class="col-9 p-5 border border-info">
            <h1>Stock Headlines</h1>
            </br>
        </div>
    </div>

    <div id="news"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script>
    
        $(document).ready(function() {

            $("#go").on("click", function() {

                var stock = $("#search").val();
                var settings = {
                    "async": true,
                    "crossDomain": true,
                    "url": `https://apidojo-yahoo-finance-v1.p.rapidapi.com/stock/get-news?region=US&category=${stock}`,
                    "method": "GET",
                    "headers": {
                        "x-rapidapi-host": "apidojo-yahoo-finance-v1.p.rapidapi.com",
                        "x-rapidapi-key": "ce81aca087msh56dfbd45fc61707p19827bjsnb24f7ca049eb"
                    }
                };

                $.ajax(settings).done(function(response) {
                    console.log(response);

                    $("#news").empty();
                    $("#news").append(`<h1>Stock Headlines</h1>`);
                    $("#news").append(`</br>`);

                    for (var i = 0; i < response.items.result.length; i++) {
                        $("#news").append(`
                            <a href=${response.items.result[i].link}>
                                <h2>${response.items.result[i].title}</h2>
                            </a>`);
                        $("#news").append(`<p>Published by: ${ response.items.result[i].publisher} </p>`);
                        $("#news").append(`<p> ${response.items.result[i].summary} </p>`);
                        $("#news").append(`</br>`);
                    };
                });

            });
        });

    </script>
</body>
</html>